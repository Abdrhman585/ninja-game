<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Ù†ÙŠÙ†Ø¬Ø§ Ø§Ù„ÙƒØ±Ø§Øª - Ù†Ø³Ø®Ø© Ø§Ù„Ø´Ø®ØµÙŠØ§Øª</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; touch-action: none; font-family: sans-serif; }
        #stats { position: absolute; top: 10px; width: 100%; display: flex; justify-content: space-around; color: white; font-size: 18px; pointer-events: none; z-index: 5; }
        .heart { color: #ff0055; }
        .exit { position: absolute; bottom: 20px; right: 20px; color: white; text-decoration: none; background: rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 5px; z-index: 10; }
        canvas { display: block; }
    </style>
</head>
<body>
    <div id="stats">
        <div>ğŸ† Ù†Ù‚Ø§Ø·: <span id="score">0</span></div>
        <div style="color: #00d2ff;">â­ Ù…Ø³ØªÙˆÙ‰: <span id="lvl">1</span></div>
        <div class="heart">â¤ï¸ Ù‚Ù„ÙˆØ¨: <span id="lives">3</span></div>
    </div>
    <a href="../index.html" class="exit">Ø®Ø±ÙˆØ¬</a>
    <canvas id="c"></canvas>

    <script>
        const canvas = document.getElementById('c');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // ØªØ­Ù…ÙŠÙ„ ØµÙˆØ± Ø§Ù„Ø´Ø®ØµÙŠØ§Øª
        const playerImg = new Image();
        playerImg.src = 'https://cdn-icons-png.flaticon.com/512/1141/1141771.png'; // ØµÙˆØ±Ø© Ø§Ù„Ù†ÙŠÙ†Ø¬Ø§ Ø£Ùˆ Ø§Ù„Ù…Ø¶Ø±Ø¨

        const ballImg = new Image();
        ballImg.src = 'https://cdn-icons-png.flaticon.com/512/2964/2964514.png'; // ØµÙˆØ±Ø© Ø§Ù„ÙƒØ±Ø©

        const bombImg = new Image();
        bombImg.src = 'https://cdn-icons-png.flaticon.com/512/564/564444.png'; // ØµÙˆØ±Ø© Ø§Ù„Ù‚Ù†Ø¨Ù„Ø©

        let score = 0, level = 1, lives = 3, speed = 4;
        let player = { x: canvas.width/2 - 45, w: 90, h: 60 };
        let items = [];

        function createItem() {
            let isBomb = Math.random() < 0.2;
            items.push({
                x: Math.random() * (canvas.width - 40) + 20,
                y: -50,
                size: 40,
                type: isBomb ? 'bomb' : 'ball'
            });
        }
        setInterval(createItem, 1000);

        function update() {
            items.forEach((item, i) => {
                item.y += speed;
                // ØªØµØ§Ø¯Ù… Ø§Ù„Ø´Ø®ØµÙŠØ§Øª
                if (item.y + item.size > canvas.height - 80 && item.x > player.x && item.x < player.x + player.w) {
                    if (item.type === 'ball') {
                        score += 5;
                        if (score % 20 === 0) { level++; speed += 0.5; }
                    } else {
                        level = Math.max(1, level - 15);
                        speed = 4 + (level * 0.5);
                        score = (level - 1) * 20;
                    }
                    items.splice(i, 1);
                }
                if (item.y > canvas.height) {
                    if (item.type === 'ball') lives -= 0.5;
                    items.splice(i, 1);
                }
            });
            if (lives <= 0) { alert("Game Over! Lvl: " + level); location.reload(); }
            document.getElementById('score').innerText = score;
            document.getElementById('lvl').innerText = level;
            document.getElementById('lives').innerText = lives;
        }

        function draw() {
            ctx.fillStyle = "#050a10";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Ø±Ø³Ù… Ø´Ø®ØµÙŠØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ (Ø§Ù„Ù†ÙŠÙ†Ø¬Ø§)
            ctx.drawImage(playerImg, player.x, canvas.height - 90, player.w, player.h);

            // Ø±Ø³Ù… Ø§Ù„Ø£Ø¬Ø³Ø§Ù… Ø§Ù„Ø³Ø§Ù‚Ø·Ø© (ÙƒØ±Ø© Ø£Ùˆ Ù‚Ù†Ø¨Ù„Ø©)
            items.forEach(item => {
                let img = (item.type === 'ball') ? ballImg : bombImg;
                ctx.drawImage(img, item.x, item.y, item.size, item.size);
            });

            update();
            requestAnimationFrame(draw);
        }

        canvas.ontouchmove = (e) => { player.x = e.touches[0].clientX - player.w/2; };
        draw();
    </script>
</body>
</html>
